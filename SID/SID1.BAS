10 REM TEST PROGRAM FOR QUAZAR'S SID INTERFACE
15 REM ON A RC2014 RUNNING ROMWBW 3.0.1

20 REM == POKE IN ASSEMBLY AT 0xF800 ==
30 LET MB=&HF800
100 PRINT "Poking in the assembly...";
110 READ OP
120 IF OP = 999 THEN GOTO 160
130 POKE MB, OP
140 LET MB = MB + 1
150 GOTO 110
160 PRINT "...Done!"

200 REM == JP to CLEAR-SID (c3 00 f8 = jp f81E) ==
210 MB = &H2293
220 POKE MB, &HC3
230 POKE MB+1, &H1E
240 POKE MB+2, &HF8
250 PRINT "Calling CLEAR-SID()...";
260 REM R = USR(0)
270 PRINT "Done!"

300 REM == SETUP USRLOC to call SID-IO-BAS at 0xF800 == 
310 POKE MB+1, &H00
315 LET S = 54272 : REM THIS IS JUST FOR THE C64
320 LET I = 0 : REM TURN OFF INTERRUPTS
330 LET V = 0 : REM SET VOICE 1 (1,2,3 == 0,7,14)

400 REM *** RC2014 SID SOUND DEMO ***
405 PRINT "Running RC2014 SID sound demo on voice";V/7+1;
406 PRINT "..."
410 LET W = 17: ON INT(RND(1)*4)+1 GOTO 420,430,440,450
420 LET W = 33: GOTO 450
430 LET W = 65: GOTO 450
440 LET W = 129
450 R = 24 : D = 15 : GOSUB 1000
451 R = 5 + V : D = 97 : GOSUB 1000
452 R = 6 + V : D = 200 : GOSUB 1000
453 R = 4 + V : D = W : GOSUB 1000
460 FOR X = 0 TO 255 STEP INT((RND(1)*15)+1)
470 R = 0 + V : D = X : GOSUB 1000
471 R = 1 + V : D = 255 - X : GOSUB 1000
480 FOR Y = 0 TO 33: NEXT Y, X
490 FOR X = 0 TO 200: NEXT : R = 24 : D = 0 :  GOSUB 1000
500 FOR X = 0 TO 100: NEXT : GOTO 410

1000 REM PRINT "POKE S+";R;",";D
1005 IF D > 127 THEN D = D - 256
1007 LET ARG = (D * 256) + R + I
1008 REM PRINT "ARG=";ARG
1010 RESULT = USR(ARG)
1015 REM PRINT "USR=";RESULT
1020 RETURN

9000 REM == SID-IO-BAS 0xF800 ==
9001 DATA 205, 241, 11, 123, 230, 96, 71, 123, 230, 15, 88
9010 REM == SID-IO 0xF80B ==
9011 DATA 14,84,179,71,237,81,0,0,0,203,248,237,81
9012 DATA 66,62,0,195,103,19
9020 REM == CLEAR-SID 0xF81E ==
9021 DATA 14,84,6,152,175,237,121,0,0,0,203,184,237
9022 DATA 121,0,0,0,203,248,237,121,201
9999 DATA 999
